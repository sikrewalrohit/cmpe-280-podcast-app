{"ast":null,"code":"var _jsxFileName = \"/Users/rohitsikrewal/Desktop/cmpe-280-podcast/src/store/authContext.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport jwt from \"jwt-decode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/React.createContext({\n  token: \"\",\n  userId: \"\",\n  isAuthorized: false,\n  login: token => {},\n  logout: () => {}\n});\nexport const TOKEN_KEY = \"token\";\nexport function AuthContextProvider(props) {\n  _s();\n\n  const token = localStorage.getItem(TOKEN_KEY);\n  const [auth, setAuth] = useState(() => {\n    try {\n      const {\n        _id: userId\n      } = jwt(token);\n      const state = {\n        token,\n        userId,\n        isAuthorized: true\n      };\n      return state;\n    } catch (err) {\n      // invalid token\n      localStorage.removeItem(TOKEN_KEY);\n      return {\n        token: \"\",\n        userId: \"\",\n        isAuthorized: false\n      };\n    }\n  });\n\n  const login = token => {\n    const {\n      _id: userId\n    } = jwt(token);\n    setAuth({\n      token,\n      userId,\n      isAuthorized: true\n    });\n    localStorage.setItem(TOKEN_KEY, token);\n  };\n\n  const logout = () => {\n    setAuth({\n      token: \"\",\n      userId: \"\",\n      isAuthorized: false\n    });\n    localStorage.removeItem(TOKEN_KEY);\n  };\n\n  const context = {\n    token: auth.token,\n    userId: auth.userId,\n    isAuthorized: auth.isAuthorized,\n    login,\n    logout\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: { ...context\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 10\n  }, this);\n}\n\n_s(AuthContextProvider, \"gqezMeSp01KcA+X9O1H5OEdWvDA=\");\n\n_c = AuthContextProvider;\nexport default AuthContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"names":["React","useState","jwt","AuthContext","createContext","token","userId","isAuthorized","login","logout","TOKEN_KEY","AuthContextProvider","props","localStorage","getItem","auth","setAuth","_id","state","err","removeItem","setItem","context","children"],"sources":["/Users/rohitsikrewal/Desktop/cmpe-280-podcast/src/store/authContext.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport jwt from \"jwt-decode\";\n\nconst AuthContext = React.createContext({\n  token: \"\",\n  userId: \"\",\n  isAuthorized: false,\n  login: (token) => {},\n  logout: () => {},\n});\n\nexport const TOKEN_KEY = \"token\";\n\nexport function AuthContextProvider(props) {\n  const token = localStorage.getItem(TOKEN_KEY);\n\n  const [auth, setAuth] = useState(() => {\n    try {\n      const { _id: userId } = jwt(token);\n\n      const state = {\n        token,\n        userId,\n        isAuthorized: true,\n      };\n\n      return state;\n    } catch (err) {\n      // invalid token\n      localStorage.removeItem(TOKEN_KEY);\n\n      return {\n        token: \"\",\n        userId: \"\",\n        isAuthorized: false,\n      };\n    }\n  });\n\n  const login = (token) => {\n    const { _id: userId } = jwt(token);\n\n    setAuth({\n      token,\n      userId,\n      isAuthorized: true,\n    });\n\n    localStorage.setItem(TOKEN_KEY, token);\n  };\n\n  const logout = () => {\n    setAuth({\n      token: \"\",\n      userId: \"\",\n      isAuthorized: false,\n    });\n\n    localStorage.removeItem(TOKEN_KEY);\n  };\n\n  const context = {\n    token: auth.token,\n    userId: auth.userId,\n    isAuthorized: auth.isAuthorized,\n    login,\n    logout,\n  };\n\n  return <AuthContext.Provider value={{ ...context }}>{props.children}</AuthContext.Provider>;\n}\n\nexport default AuthContext;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,GAAP,MAAgB,YAAhB;;AAEA,MAAMC,WAAW,gBAAGH,KAAK,CAACI,aAAN,CAAoB;EACtCC,KAAK,EAAE,EAD+B;EAEtCC,MAAM,EAAE,EAF8B;EAGtCC,YAAY,EAAE,KAHwB;EAItCC,KAAK,EAAGH,KAAD,IAAW,CAAE,CAJkB;EAKtCI,MAAM,EAAE,MAAM,CAAE;AALsB,CAApB,CAApB;AAQA,OAAO,MAAMC,SAAS,GAAG,OAAlB;AAEP,OAAO,SAASC,mBAAT,CAA6BC,KAA7B,EAAoC;EAAA;;EACzC,MAAMP,KAAK,GAAGQ,YAAY,CAACC,OAAb,CAAqBJ,SAArB,CAAd;EAEA,MAAM,CAACK,IAAD,EAAOC,OAAP,IAAkBf,QAAQ,CAAC,MAAM;IACrC,IAAI;MACF,MAAM;QAAEgB,GAAG,EAAEX;MAAP,IAAkBJ,GAAG,CAACG,KAAD,CAA3B;MAEA,MAAMa,KAAK,GAAG;QACZb,KADY;QAEZC,MAFY;QAGZC,YAAY,EAAE;MAHF,CAAd;MAMA,OAAOW,KAAP;IACD,CAVD,CAUE,OAAOC,GAAP,EAAY;MACZ;MACAN,YAAY,CAACO,UAAb,CAAwBV,SAAxB;MAEA,OAAO;QACLL,KAAK,EAAE,EADF;QAELC,MAAM,EAAE,EAFH;QAGLC,YAAY,EAAE;MAHT,CAAP;IAKD;EACF,CArB+B,CAAhC;;EAuBA,MAAMC,KAAK,GAAIH,KAAD,IAAW;IACvB,MAAM;MAAEY,GAAG,EAAEX;IAAP,IAAkBJ,GAAG,CAACG,KAAD,CAA3B;IAEAW,OAAO,CAAC;MACNX,KADM;MAENC,MAFM;MAGNC,YAAY,EAAE;IAHR,CAAD,CAAP;IAMAM,YAAY,CAACQ,OAAb,CAAqBX,SAArB,EAAgCL,KAAhC;EACD,CAVD;;EAYA,MAAMI,MAAM,GAAG,MAAM;IACnBO,OAAO,CAAC;MACNX,KAAK,EAAE,EADD;MAENC,MAAM,EAAE,EAFF;MAGNC,YAAY,EAAE;IAHR,CAAD,CAAP;IAMAM,YAAY,CAACO,UAAb,CAAwBV,SAAxB;EACD,CARD;;EAUA,MAAMY,OAAO,GAAG;IACdjB,KAAK,EAAEU,IAAI,CAACV,KADE;IAEdC,MAAM,EAAES,IAAI,CAACT,MAFC;IAGdC,YAAY,EAAEQ,IAAI,CAACR,YAHL;IAIdC,KAJc;IAKdC;EALc,CAAhB;EAQA,oBAAO,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAE,EAAE,GAAGa;IAAL,CAA7B;IAAA,UAA8CV,KAAK,CAACW;EAApD;IAAA;IAAA;IAAA;EAAA,QAAP;AACD;;GAzDeZ,mB;;KAAAA,mB;AA2DhB,eAAeR,WAAf"},"metadata":{},"sourceType":"module"}